(function(e){function n(n){for(var t,d,i=n[0],c=n[1],l=n[2],f=0,s=[];f<i.length;f++)d=i[f],Object.prototype.hasOwnProperty.call(o,d)&&o[d]&&s.push(o[d][0]),o[d]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);u&&u(n);while(s.length)s.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(t=!1)}t&&(a.splice(n--,1),e=d(d.s=r[0]))}return e}var t={},o={app:0},a=[];function d(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,d),r.l=!0,r.exports}d.m=e,d.c=t,d.d=function(e,n,r){d.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,n){if(1&n&&(e=d(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(d.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)d.d(r,t,function(n){return e[n]}.bind(null,t));return r},d.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(n,"a",n),n},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=n,i=i.slice();for(var l=0;l<i.length;l++)n(i[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,n,r){e.exports=r("56d7")},"56d7":function(e,n,r){"use strict";r.r(n);r("e260"),r("e6cf"),r("cca6"),r("a79d");var t=r("2b0e"),o=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{attrs:{id:"app"}},[r("org-tree")],1)},a=[],d=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("node-box",{attrs:{nodeObj:this.dataObj}})},i=[],c=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"nodeBox"},[r("div",{staticClass:"labelName",attrs:{draggable:"守护遗迹"!=e.nodeObj.name},on:{dragstart:function(n){return e.dragstart(n,e.nodeObj,e.broNodeArr)},dragover:function(n){return e.dragover(n,e.nodeObj)},drop:function(n){return e.drop(n,e.nodeObj,e.broNodeArr)},dragend:function(n){return e.dragend(n,e.nodeObj,e.broNodeArr)}}},[e._v(" "+e._s(e.nodeObj.name)+" ")]),0!==e.nodeObj.children.length?r("div",{staticClass:"childBox"},e._l(e.nodeObj.children,(function(n){return r("node-box",{key:n.index,attrs:{nodeObj:n,broNodeArr:e.nodeObj.children}})})),1):e._e()])},l=[],u=r("2909"),f=(r("c740"),r("b0c0"),r("a434"),r("caad"),new t["a"]({data:function(){return{dragNodeIndex:-1,fatherToSonState:!1,moveToSelfState:!1,dragNode:{}}},created:function(){var e=this;this.$on("trans-drag-node-index",(function(n){e.dragNodeIndex=n})),this.$on("state-father-drag-to-son",(function(n){e.fatherToSonState=n})),this.$on("state-move-to-self",(function(n){e.moveToSelfState=n})),this.$on("get-drag-node",(function(n){e.dragNode=n}))}})),s=f,p={name:"NodeBox",data:function(){return{dragNode:{}}},props:{nodeObj:Object,broNodeArr:Array},methods:{dragstart:function(e,n,r){s.$emit("get-drag-node",n);var t=JSON.stringify(n);e.dataTransfer.setData("node",t);var o=r.findIndex((function(e){return JSON.stringify(e)===t}));s.$emit("trans-drag-node-index",o)},dragover:function(e){e.preventDefault()},drop:function(e,n){console.log("🐉drop到的点位",n.name);var r=JSON.parse(e.dataTransfer.getData("node")),t=this.ifFatherDragToSon(s.dragNode,n);if(s.$emit("state-father-drag-to-son",t),!t){var o=s.dragNode===n;s.$emit("state-move-to-self",o),o||n.children.push(r)}},dragend:function(e,n,r){console.log(e.dataTransfer.dropEffect,"dragend拖放dropEffect操作效果");var t=e.dataTransfer.dropEffect;if("move"==t){if(s.fatherToSonState)return void console.log("移动到子节点了,啥也不做");if(s.moveToSelfState)return void console.log("移动到自身了，啥也不做");var o=s.dragNodeIndex;console.log(o,"🐉dragend拿到了index"),r.splice(o,1)}},ifFatherDragToSon:function(e,n){if(0===e.children.length)return!1;var r=[];function t(e){if(r.push.apply(r,Object(u["a"])(e.children)),0!==e.children.length)for(var n=0;n<e.children.length;n++)t(e.children[n])}return t(e),!!r.includes(n)}}},h=p,g=(r("94c5"),r("2877")),b=Object(g["a"])(h,c,l,!1,null,null,null),v=b.exports,m={name:"OrgTree",components:{NodeBox:v},data:function(){return{dataObj:{name:"守护遗迹",children:[{name:"天辉",children:[{name:"毛毛熊",children:[]},{name:"戳戳龙",children:[]},{name:"王炸",children:[]}]},{name:"夜魇",children:[{name:"拎壶冲",children:[{name:"王炸",children:[]}]},{name:"蒙哥·别摸我",children:[{name:"圣剑",children:[{name:"恶魔刀锋",children:[]}]}]}]},{name:"肉山",children:[]}]}}}},O=m,j=Object(g["a"])(O,d,i,!1,null,null,null),x=j.exports,S={name:"App",components:{OrgTree:x}},y=S,N=(r("5c0b"),Object(g["a"])(y,o,a,!1,null,null,null)),T=N.exports,_=r("2f62");t["a"].use(_["a"]);var w=new _["a"].Store({state:{}});t["a"].config.productionTip=!1,new t["a"]({store:w,render:function(e){return e(T)}}).$mount("#app")},"5c0b":function(e,n,r){"use strict";r("9c0c")},6224:function(e,n,r){},"94c5":function(e,n,r){"use strict";r("6224")},"9c0c":function(e,n,r){}});
//# sourceMappingURL=app.5d030636.js.map